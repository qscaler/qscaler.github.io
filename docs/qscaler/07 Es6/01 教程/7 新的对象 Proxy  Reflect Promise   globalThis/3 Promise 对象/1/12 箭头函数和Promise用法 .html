<!--
 * @Author              : qxp
 * @Date                : 2021-10-24 15:50:05
 * @LastEditors         : Please set LastEditors
 * @LastEditTime        : 2021-10-24 15:54:41
 * @FilePath            : \new\6 Es6\7 新的对象 Proxy  Reflect Promise   globalThis\3 Promise 对象\12 箭头函数和Promise用法 .html
-->
<script>
    function pro() {
        return new Promise((resolve, reject) => {
            console.log("创建Promise……");
            resolve({ "data": { "name": "张大千", "age": 99 } });

        });
    }

    var obj = {
        data: {
            arrays: []
        },
        methods: {
            fun1: function () {
                console.log("###############");
            },
            fun2: function () {
                console.log("执行fun2……");
                pro().then(res => {
                    console.log(res.data.name);
                    this.data.arrays.push(res.data);

                });
                console.log("then结束……");
            },
            data: { arrays: [] }
        }
    }



    obj.methods.fun2();
    setTimeout(function () {
        console.log(obj.methods.data.arrays);
    }, 1000);
</script>

执行fun2……
创建Promise……
then结束……
张大千
[{name: '张大千', age: 99}]