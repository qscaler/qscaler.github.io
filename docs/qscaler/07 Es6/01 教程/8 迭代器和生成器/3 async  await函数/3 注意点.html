<!--
 * @Author              : qxp
 * @Date                : 2021-03-26 11:48:48
 * @LastEditors         : Please set LastEditors
 * @LastEditTime        : 2021-03-26 14:12:42
 * @FilePath            : \new\6 Es6\13 async 函数\3 注意点.html
-->


1 第一点，前面已经说过，await命令后面的Promise对象，运行结果可能是rejected，所以最好把await命令放在try...catch代码块中。
<script>
    async function f() {
        await Promise.reject('出错了').catch(e => console.log(e));
        return await Promise.resolve('hello world');
    }

    f().then(v => console.log(v))
    // 出错了
</script>
2 第二点，多个await命令后面的异步操作，如果不存在继发关系，最好让它们同时触发。
<script>
    let foo = await getFoo();
    let bar = await getBar();

    // 写法一
    let [foo, bar] = await Promise.all([getFoo(), getBar()]);

    // 写法二
    let fooPromise = getFoo();    //先同时执行两个请求，然后再等待两个请求的结果。
    let barPromise = getBar();
    let foo = await fooPromise;
    let bar = await barPromise;
    // 上面两种写法，getFoo和getBar都是同时触发，这样就会缩短程序的执行时间。
</script>