<!--
 * @Author              : qxp
 * @Date                : 2021-03-22 15:02:25
 * @LastEditors         : Please set LastEditors
 * @LastEditTime        : 2021-03-22 15:11:06
 * @FilePath            : \new\6 Es6\5 扩展\3 函数的扩展.html
-->

### 函数的扩展

总结

1. 函数参数的默认值
2. rest 参数
3. 严格模式
4. name 属性
5. 箭头函数
6. 尾调用优化
7. 函数参数的尾逗号
8. Function.prototype.toString()
9. catch 命令的参数省略

### 1

1.  函数参数的默认值

    基本用法
    ES6 之前，不能直接为函数的参数指定默认值，只能采用变通的方法。

    ```js
    function log(x, y) {
        y = y || 'World'
        console.log(x, y)
    }
    log('Hello') // Hello World
    log('Hello', 'China') // Hello China
    log('Hello', '') // Hello World
    ```

    上面代码检查函数 log()的参数 y 有没有赋值，如果没有，则指定默认值为 World。这种写法的缺点在于，**如果参数 y 赋值了，但是对应的布尔值为 false，则该赋值不起作用。就像上面代码的最后一行，参数 y 等于空字符，结果被改为默认值**。

    为了避免这个问题，通常需要先判断一下参数 y 是否被赋值，如果没有，再等于默认值。

    ```js
    if (typeof y === 'undefined') {
        y = 'World'
    }
    ```

    ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。

    ```js
    function log(x, y = 'World') {
        console.log(x, y)
    }

    log('Hello') // Hello World
    log('Hello', 'China') // Hello China
    log('Hello', '') // Hello
    ```

    可以看到，ES6 的写法比 ES5 简洁许多，而且非常自然。下面是另一个例子。

    ```js
    function Point(x = 0, y = 0) {
        this.x = x
        this.y = y
    }
    const p = new Point()
    p // { x: 0, y: 0 }
    ```

2.  参数变量是默认声明的，所以不能用 let 或 const 再次声明。

    ```js
    function foo(x = 5) {
        let x = 1 // error
        const x = 2 // error
    }
    ```

    上面代码中，参数变量 x 是默认声明的，在函数体中，不能用 let 或 const 再次声明，否则会报错。

3.  使用参数默认值时，函数不能有同名参数。

    ```js
    // 不报错
    function foo(x, x, y) {
        // ...
    }

    // 报错
    function foo(x, x, y = 1) {
        // ...
    }
    ```

    // SyntaxError: Duplicate parameter name not allowed in this context

4.  另外，一个容易忽略的地方是，参数默认值不是传值的，而是每次都重新计算默认值表达式的值。也就是说，参数默认值是惰性求值的。

    ```js
    let x = 99
    function foo(p = x + 1) {
        console.log(p)
    }

    foo() // 100

    x = 100
    foo() // 101
    ```

    上面代码中，参数 p 的默认值是 x + 1。这时，每次调用函数 foo()，都会重新计算 x + 1，而不是默认 p 等于 100。???????????/
